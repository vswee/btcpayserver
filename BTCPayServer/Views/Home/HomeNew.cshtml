@{
    Layout = "_LayoutNew";
}

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@inject RoleManager<IdentityRole> RoleManager
@inject BTCPayServer.Services.BTCPayServerEnvironment env
@inject BTCPayServer.HostedServices.NBXplorerDashboard dashboard
@inject BTCPayServer.HostedServices.CssThemeManager themeManager

@model LoginViewModel

<masterLand>
    <div class="header-content">
        <div class="header-content-inner">
            <div class="iconography">
                <a class="navbar-brand js-scroll-trigger" href="~/">
                    <svg class="_Logo" onclick="window.location=\'/\'" version="1.1" id="_Logo_1"
                         xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                         y="0px" width="200px" height="100px" viewBox="0 0 200 100"
                         enable-background="new 0 0 200 100" xml:space="preserve">
                    <g>
                    <path fill="#CEDC21" d="M9.206,91.433c-2.684,0-4.859-2.177-4.859-4.861V13.431c0-2.685,2.176-4.861,4.859-4.861
                            s4.86,2.177,4.86,4.861v73.141C14.066,89.256,11.89,91.433,9.206,91.433" />

                    <path fill="#51B13E"
                          d="M9.209,91.433c-1.818,0-3.561-1.025-4.394-2.777c-1.151-2.424-0.118-5.322,2.308-6.476L36.43,68.274
                            L6.323,46.093c-2.16-1.593-2.621-4.635-1.029-6.796s4.636-2.622,6.795-1.03l36.647,26.999c1.377,1.016,2.12,2.678,1.956,4.381
                            c-0.164,1.7-1.209,3.19-2.755,3.925L11.289,90.964C10.618,91.281,9.907,91.433,9.209,91.433" />

                    <path fill="#CEDC21"
                          d="M9.211,62.684c-1.493,0-2.965-0.685-3.917-1.979c-1.592-2.159-1.131-5.204,1.03-6.795L36.43,31.73
                            L7.123,17.821c-2.426-1.151-3.459-4.05-2.309-6.475c1.152-2.426,4.051-3.459,6.475-2.309l36.648,17.394
                            c1.546,0.733,2.591,2.225,2.755,3.926c0.164,1.702-0.579,3.364-1.956,4.379l-36.647,27C11.22,62.375,10.211,62.684,9.211,62.684" />

                    <polygon fill="#1E7A44" points="14.066,39.725 14.066,60.278 28.01,50.006 	" />

                    <path fill="#CEDC21"
                          d="M14.066,13.431c0-2.685-2.177-4.861-4.86-4.861s-4.859,2.177-4.859,4.861v61.165h9.72V13.431z" />

                    <path fill="var(--white-text)" d="M78.355,49.412c3.114,0.884,4.84,3.704,4.84,7.238c0,5.513-3.368,8.082-7.955,8.082H64.761V35.271h9.259
                            c4.504,0,7.997,2.146,7.997,7.743C82.017,45.835,80.838,48.444,78.355,49.412 M74.062,48.696c3.324,0,6.018-1.179,6.018-5.724
                            c0-4.586-2.776-5.808-6.145-5.808h-7.197v11.531H74.062z M75.114,62.795c3.366,0,6.06-1.768,6.06-6.145
                            c0-4.713-3.072-6.144-6.901-6.144h-7.534v12.288H75.114z" />

                    <polygon fill="var(--white-text)" points="102.893,35.271 102.893,37.081 94.771,37.081 94.771,64.732 92.792,64.732 92.792,37.081
                            84.669,37.081 84.669,35.271 	" />

                    <path fill="var(--white-text)"
                          d="M116.738,34.85c5.01,0,9.554,2.524,10.987,8.543h-1.895c-1.348-4.923-5.303-6.732-9.134-6.732
                            c-6.944,0-10.605,5.681-10.605,13.341c0,8.08,3.661,13.256,10.646,13.256c4.125,0,7.828-1.85,9.26-7.279h1.895
                            c-1.264,6.271-6.229,9.174-11.154,9.174c-7.87,0-12.583-5.808-12.583-15.15C104.155,41.037,109.124,34.85,116.738,34.85" />

                    <path fill="var(--white-text)"
                          d="M142.709,35.271c5.091,0,8.795,3.326,8.795,9.764c0,6.06-3.704,9.722-8.795,9.722h-7.746v9.976h-1.935
                            V35.271H142.709z M142.709,52.82c3.745,0,6.816-2.397,6.816-7.827c0-5.429-2.947-7.869-6.816-7.869h-7.746V52.82H142.709z" />

                    <path fill="var(--white-text)" d="M151.841,64.732v-0.255l11.741-29.29h0.885l11.615,29.29v0.255h-2.062l-3.322-8.501H157.27l-3.324,8.501
                            H151.841z M164.005,38.68l-6.059,15.697h12.078L164.005,38.68z" />

                    <polygon fill="var(--white-text)"
                             points="193.551,35.271 195.655,35.271 195.655,35.564 186.479,52.484 186.479,64.732 184.459,64.732
                            184.459,52.484 175.243,35.523 175.243,35.271 177.39,35.271 181.387,42.763 185.43,50.549 185.47,50.549 189.551,42.763 	" />

                                </g>
                            </svg>
                    @if (env.NetworkType != NBitcoin.NetworkType.Mainnet)
                    {
                        <span class="badge badge-warning" style="font-size:10px;">@env.NetworkType.ToString()</span>
                    }
                </a>
                @if (env.OnionUrl != null)
                {
                    <span>
                        <a href="@env.OnionUrl" target="_blank">
                            <img src="~/img/icons/onion.svg" width="26" height="32" />
                        </a>
                    </span>
                }
            </div>
            <h1>Welcome to BTCPay Server</h1>
            <span class="short-horiz"></span>
            <p>
                BTCPay Server is a free and open source server for merchants wanting to accept Bitcoin for their
                business.
            </p>
            <a style="background-color: #fff;color: #222;display:inline-block;text-align: center;white-space: nowrap;vertical-align: middle;user-select: none;line-height: 1.25;font-size: 1rem;text-decoration:none;font-weight: 700;    text-transform: uppercase;border: none;border-radius: 300px;padding: 15px 30px;"
               href="https://btcpayserver.org" target="_blank">Official website</a>
        </div>
        @if (SignInManager.IsSignedIn(User))
        {
            <ul class="navbar-nav ml-auto">
                if (User.IsInRole(Roles.ServerAdmin))
                {
                <li class="nav-item">
                    <a asp-area="" asp-controller="Server" asp-action="ListUsers"
                       class="nav-link js-scroll-trigger" id="ServerSettings">Server settings</a>
                </li>
                }
                <li class="nav-item">
                    <a asp-area="" asp-controller="UserStores" asp-action="ListStores"
                       class="nav-link js-scroll-trigger" id="Stores">Stores</a>
                </li>
                <li class="nav-item">
                    <a asp-area="" asp-controller="Apps" asp-action="ListApps"
                       class="nav-link js-scroll-trigger" id="Apps">Apps</a>
                </li>
                <li class="nav-item">
                    <a asp-area="" asp-controller="Wallets" asp-action="ListWallets"
                       class="nav-link js-scroll-trigger" id="Wallets">Wallets</a>
                </li>
                <li class="nav-item">
                    <a asp-area="" asp-controller="Invoice" asp-action="ListInvoices"
                       class="nav-link js-scroll-trigger" id="Invoices">Invoices</a>
                </li>
                <li class="nav-item">
                    <a asp-area="" asp-controller="PaymentRequest"
                       asp-action="GetPaymentRequests" class="nav-link js-scroll-trigger"
                       id="PaymentRequests">Payment Requests</a>
                </li>
                <li class="nav-item">
                    <a asp-area="" asp-controller="Manage" asp-action="Index" title="My settings"
                       class="nav-link js-scroll-trigger" id="MySettings"><i class="fa fa-user"></i></a>
                </li>
                <li class="nav-item">
                    <a asp-area="" asp-controller="Account" asp- asp-action="Logout" title="Logout"
                       class="nav-link js-scroll-trigger" id="Logout"><i class="fa fa-sign-out"></i></a>
                </li>

            </ul>
            @if (User.Identity.IsAuthenticated)
            {
                <div class="container text-right">@env.ToString()</div>

            }
        }
        else if (env.IsSecure)
        {
            <div class="modern-login-register">
                <div class="shape-hold triangle_" style="transform: rotate(-14deg)translate(-18px,-46px)scale(2);">
                    <svg style="animation-delay:1.5s;" class="s-sh-a"
                         enable-background="new 0 0 50 50" height="50" viewBox="0 0 50 50" width="50"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="m25 6.514-25 36.972h50z" fill="#1e7a44" />
                    </svg>
                </div>

                <div class="shape-hold square_" style="transform: rotate(-32deg)translate(83px,-50px)scale(1);">
                    <svg class="s-sh-a"
                         enable-background="new 0 0 50 50" height="50" viewBox="0 0 50 50" width="50"
                         xmlns="http://www.w3.org/2000/svg">
                        <path d="m0 0h50v50h-50z" fill="#cedc21" />
                    </svg>
                </div>
                <div class="modern-login-register-inner">

                    <form asp-route-returnurl="@ViewData["ReturnUrl"]" method="post">
                        <span class="form-name">Sign in</span>
                        <div class="f-el">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                            <span asp-validation-for="Email" class="text-danger"></span>
                            <span class="form-lab">email</span>
                            <input asp-for="Email" class="form-input" placeholder="" required="required" />

                            <span asp-validation-for="Password" class="text-danger"></span>
                        </div>
                        <div class="f-el">
                            <span class="form-lab">password</span>
                            <input asp-for="Password" class="form-input" placeholder="" required="required" type="password" />
                        </div>
                        <div class="f-el">
                            <button type="submit" class="fp-button" id="LoginButton" asp-controller="Account" asp-action="Login">login</button>
                        </div>
                    </form>

                    <a class="fp-button-sec" asp-controller="Account" asp-action="ForgotPassword">Forgot your password?</a>

                    @if (themeManager.ShowRegister)
                    {

                        <a asp-area="" asp-controller="Account" asp-action="Register" class="fp-button-sec" id="Register">Register</a>
                    }


                </div>
                <div class="shape-hold triangle_" style="transform: rotate(52deg)translate(-13px,-40px)scale(1.4);z-index:2;float: right;position: relative;"><svg class="s-sh-a" enable-background="new 0 0 50 50" height="50" viewBox="0 0 50 50" width="50" xmlns="http://www.w3.org/2000/svg"><path d="m25 6.514-25 36.972h50z" fill="#cedc21" /></svg></div>

                <div class="shape-hold square_ " style="transform: rotate(11deg)translate(68px,-108px)scale(0.8);z-index: 3;float: right;position: relative;"><svg style="animation-delay:2s;" class="s-sh-a" enable-background="new 0 0 50 50" height="50" viewBox="0 0 50 50" width="50" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h50v50h-50z" fill="#51B13E" /></svg></div>
            </div>
        }
    </div>

</masterLand>
